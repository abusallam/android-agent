# TacticalOps Platform - Production Environment Configuration
# Copy this file to .env.production and update with your values

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================
NODE_ENV=production
BUILD_VERSION=2.0.0
DEPLOYMENT_TIER=civilian
DOMAIN=tacticalops.yourdomain.com

# Data and logs paths (absolute paths recommended for production)
DATA_PATH=/opt/tacticalops/data
LOGS_PATH=/opt/tacticalops/logs

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
PORT=3000
API_VERSION=v2
LOG_LEVEL=info

# Features enabled for this tier
# civilian: basic,mapping,emergency,communication
# government: enhanced,mapping,emergency,communication,analytics,compliance
# military: full,mapping,emergency,communication,analytics,compliance,tactical,intelligence
FEATURES_ENABLED=basic,mapping,emergency,communication

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_NAME=tacticalops
DB_USER=tacticalops
DB_PASSWORD=CHANGE_THIS_SECURE_DATABASE_PASSWORD
DATABASE_URL=postgresql://${DB_USER}:${DB_PASSWORD}@postgres:5432/${DB_NAME}

# Database connection pool settings
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_TIMEOUT=30000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_PASSWORD=CHANGE_THIS_SECURE_REDIS_PASSWORD
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379
REDIS_MAX_MEMORY=512mb
REDIS_POLICY=allkeys-lru

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Generate secure random keys:
# openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_TO_A_SECURE_JWT_SECRET_KEY_32_CHARS_MIN
ENCRYPTION_KEY=CHANGE_THIS_TO_A_SECURE_32_BYTE_ENCRYPTION_KEY
SESSION_SECRET=CHANGE_THIS_TO_A_SECURE_SESSION_SECRET_KEY

# Agent API authentication
AGENT_API_KEY=CHANGE_THIS_TO_A_SECURE_AGENT_API_KEY

# Password hashing rounds (higher = more secure but slower)
BCRYPT_ROUNDS=12

# Session configuration
SESSION_MAX_AGE=86400
SESSION_SECURE=true
SESSION_SAME_SITE=strict

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/tacticalops.crt
SSL_KEY_PATH=/etc/ssl/private/tacticalops.key

# Let's Encrypt configuration (if using certbot)
LETSENCRYPT_EMAIL=admin@yourdomain.com
LETSENCRYPT_STAGING=false

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=3600
RATE_LIMIT_SKIP_SUCCESSFUL=false

# Agent-specific rate limits
AGENT_RATE_LIMIT_REQUESTS=10000
AGENT_RATE_LIMIT_WINDOW=3600

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
PROMETHEUS_ENABLED=true
GRAFANA_ENABLED=true
GRAFANA_USER=admin
GRAFANA_PASSWORD=CHANGE_THIS_SECURE_GRAFANA_PASSWORD

# Metrics retention
PROMETHEUS_RETENTION=30d
GRAFANA_RETENTION=90d

# Log aggregation
LOKI_ENABLED=true
LOG_RETENTION_DAYS=30

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION=true
BACKUP_ENCRYPTION_KEY=CHANGE_THIS_TO_A_SECURE_BACKUP_ENCRYPTION_KEY

# Backup storage (local, s3, gcs, azure)
BACKUP_STORAGE=local
BACKUP_PATH=/opt/tacticalops/backups

# S3 backup configuration (if using S3)
# AWS_ACCESS_KEY_ID=your_access_key
# AWS_SECRET_ACCESS_KEY=your_secret_key
# AWS_REGION=us-east-1
# S3_BUCKET=tacticalops-backups

# =============================================================================
# EMAIL CONFIGURATION (for notifications)
# =============================================================================
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=CHANGE_THIS_SMTP_PASSWORD
EMAIL_FROM=TacticalOps <noreply@yourdomain.com>

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# Map tile services
MAP_TILE_SERVER=https://tile.openstreetmap.org
MAP_TILE_API_KEY=your_map_api_key_if_required

# Weather service (optional)
WEATHER_API_KEY=your_weather_api_key
WEATHER_API_URL=https://api.openweathermap.org/data/2.5

# Geocoding service (optional)
GEOCODING_API_KEY=your_geocoding_api_key
GEOCODING_API_URL=https://api.mapbox.com/geocoding/v5

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
# Node.js performance settings
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=16

# Next.js optimization
NEXT_TELEMETRY_DISABLED=1
NEXT_OPTIMIZE_FONTS=true
NEXT_OPTIMIZE_IMAGES=true

# Cache settings
CACHE_TTL=3600
STATIC_CACHE_TTL=86400

# =============================================================================
# DEVELOPMENT/DEBUG (disable in production)
# =============================================================================
DEBUG=false
VERBOSE_LOGGING=false
ENABLE_PROFILING=false

# =============================================================================
# TIER-SPECIFIC CONFIGURATIONS
# =============================================================================

# Civilian Tier Settings
CIVILIAN_MAX_USERS=100
CIVILIAN_MAX_CONCURRENT=50
CIVILIAN_FEATURES=basic,mapping,emergency,communication

# Government Tier Settings (uncomment if using government tier)
# GOVERNMENT_MAX_USERS=500
# GOVERNMENT_MAX_CONCURRENT=250
# GOVERNMENT_FEATURES=enhanced,mapping,emergency,communication,analytics,compliance
# GOVERNMENT_AUDIT_ENABLED=true
# GOVERNMENT_COMPLIANCE_MODE=fedRAMP

# Military Tier Settings (uncomment if using military tier)
# MILITARY_MAX_USERS=1000
# MILITARY_MAX_CONCURRENT=500
# MILITARY_FEATURES=full,mapping,emergency,communication,analytics,compliance,tactical,intelligence
# MILITARY_CLASSIFICATION_ENABLED=true
# MILITARY_PKI_ENABLED=true
# MILITARY_AIR_GAP_MODE=false

# =============================================================================
# CONTAINER RESOURCE LIMITS
# =============================================================================
# Memory limits (in MB)
APP_MEMORY_LIMIT=1024
DB_MEMORY_LIMIT=2048
REDIS_MEMORY_LIMIT=512
PROMETHEUS_MEMORY_LIMIT=1024
GRAFANA_MEMORY_LIMIT=512

# CPU limits (in cores)
APP_CPU_LIMIT=1.0
DB_CPU_LIMIT=1.0
REDIS_CPU_LIMIT=0.5
PROMETHEUS_CPU_LIMIT=0.5
GRAFANA_CPU_LIMIT=0.5

# =============================================================================
# HEALTH CHECK CONFIGURATION
# =============================================================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=60s

# =============================================================================
# SECURITY HEADERS
# =============================================================================
SECURITY_HEADERS_ENABLED=true
CSP_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ENABLED=true
CORS_ORIGIN=https://tacticalops.yourdomain.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-Requested-With

# =============================================================================
# WEBHOOK CONFIGURATION
# =============================================================================
WEBHOOK_SECRET=CHANGE_THIS_WEBHOOK_SECRET
WEBHOOK_TIMEOUT=30000
WEBHOOK_RETRIES=3

# =============================================================================
# MAINTENANCE MODE
# =============================================================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.
MAINTENANCE_ALLOWED_IPS=127.0.0.1,::1

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_AGENT_API=true
FEATURE_REAL_TIME=true
FEATURE_FILE_UPLOAD=true
FEATURE_NOTIFICATIONS=true
FEATURE_ANALYTICS=true
FEATURE_BACKUP=true

# =============================================================================
# TIMEZONE CONFIGURATION
# =============================================================================
TZ=UTC
DEFAULT_TIMEZONE=UTC
TIMEZONE_DETECTION=true

# =============================================================================
# LOCALIZATION
# =============================================================================
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,ar
RTL_LANGUAGES=ar
AUTO_DETECT_LANGUAGE=true

# =============================================================================
# CUSTOM CONFIGURATION
# =============================================================================
# Add any custom environment variables here
CUSTOM_BRANDING=false
CUSTOM_LOGO_URL=
CUSTOM_THEME_PRIMARY=#2563eb
CUSTOM_THEME_SECONDARY=#64748b

# Organization information
ORG_NAME=TacticalOps
ORG_CONTACT=admin@yourdomain.com
ORG_WEBSITE=https://yourdomain.com